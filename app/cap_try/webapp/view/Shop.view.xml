<mvc:View controllerName="cap_try.controller.Shop"
    xmlns:mvc="sap.ui.core.mvc"
	xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    
    <Page id="page" title="{i18n>title}">
            <customHeader>
                <Bar>
                    <contentLeft>
                        <Button icon="sap-icon://menu2" press="initializeMenu" />
                    </contentLeft>
                    <contentMiddle>
                        <Title text="{i18n>shop}" />
                    </contentMiddle>
                    <contentRight>
                        <Button icon="sap-icon://cart" press="openCartDialog" tooltip="{i18n>cart}" visible="{= !!${globalModel>/selectedCompany/ID} }" >
                            <customData>
                                <BadgeCustomData animation="Update"  value="{= ${globalModel>/cartItemsQuantity} }" />
                            </customData>
                        </Button>
                    </contentRight>
                </Bar>
            </customHeader>
            <Panel expandable="true"
                   width="auto"
                   class="sapUiResponsiveMargin"
                   expanded="true"
                   headerText="{i18n>toogle_company_details}">
                <VBox>
                    <f:SimpleForm id="SimpleFormDisplay354"
                                  editable="false"
                                  title="{i18n>company_details}"
                                  labelSpanXL="3"
                                  labelSpanL="3"
                                  labelSpanM="3"
                                  labelSpanS="12"
                                  adjustLabelSpan="false"
                                  emptySpanXL="4"
                                  emptySpanL="4"
                                  emptySpanM="4"
                                  emptySpanS="0"
                                  columnsXL="1"
                                  columnsL="1"
                                  columnsM="1"
                                  binding="{globalModel>/selectedCompany}" >
                        <f:content>
                            <Label class="sapUiTinyMargin" text="{i18n>name}" />
                            <HBox width="auto">
                                <ComboBox width="auto" change="onCompanyChange" value="{globalModel>name}" 
                                          id="companyComboBox" placeholder="{i18n>select_company}"
                                          items="{ path: '/Company',
                                                   sorter: { path: 'name' } }">
                                    <items>
                                        <core:Item key="{ID}" text="{name}" />
                                    </items>
                                </ComboBox>  
                                <Button text="{i18n>cancel}" type="Default" class="sapUiSmallMarginBegin" 
                                        visible="{= !!${globalModel>name} }" press="onCompanyCancelPress" />
                            </HBox>              
                            <Label text="{i18n>name}" />
                            <Text text="{globalModel>name}" />
                            <Label text="{i18n>description}" />
                            <Text text="{globalModel>description}" />
                            <Label text="{i18n>capital}" />
                            <Text id="" text="{globalModel>capital} {globalModel>currency}" />
                        </f:content>
                    </f:SimpleForm>
                </VBox>
            </Panel>
            <content>
                <HBox width="auto">
                    <VBox class="sapUiResponsiveMargin" visible="{= !!${globalModel>/selectedCompany/ID} }">
                        <core:Fragment fragmentName="cap_try.view.fragments.ProductsTable" type="XML" />
                    </VBox>
                </HBox>
            </content>
            <footer>
                <Toolbar>
                    <Button visible="{= ${messageModel>/}.length !== 0}" press="toggleMessageView" 
                            icon="sap-icon://alert" type="Emphasized" text="{= ${messageModel>/}.length}" />
                </Toolbar>
            </footer>
    </Page>
</mvc:View>