<mvc:View controllerName="cap_try.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:table="sap.ui.table"
    xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    
    <Page id="page" title="{i18n>title}">
            <customHeader>
                <Bar>
                    <contentLeft>
                        <Button icon="sap-icon://menu2" press="menu" />
                    </contentLeft>
                    <contentMiddle>
                        <Title text="{i18n>shop}" />
                    </contentMiddle>
                    <contentRight>
                        <Button icon="sap-icon://cart" press="openCartDialog" tooltip="{i18n>cart}" visible="{= !!${globalModel>/selectedCompany/ID} }" >
                            <customData>
                                <BadgeCustomData animation="Update"  value="{= ${globalModel>/cart}.length }" />
                            </customData>
                        </Button>
                    </contentRight>
                </Bar>
            </customHeader>
            <Panel expandable="true"
                width="auto"
                   class="sapUiResponsiveMargin"
                   expanded="true"
                   headerText="Toggle Company Details">
                <VBox>
                    <f:SimpleForm id="SimpleFormDisplay354"
                        editable="false"
                        layout="ResponsiveGridLayout"
                        title="Company details"
                        labelSpanXL="3"
                        labelSpanL="3"
                        labelSpanM="3"
                        labelSpanS="12"
                        adjustLabelSpan="false"
                        emptySpanXL="4"
                        emptySpanL="4"
                        emptySpanM="4"
                        emptySpanS="0"
                        columnsXL="1"
                        columnsL="1"
                        columnsM="1"
                        binding="{globalModel>/selectedCompany}" >
                        <f:content>
                            <Label class="sapUiTinyMargin" text="Company name" />
                            <HBox width="auto">
                                <ComboBox width="auto" change="onCompanyChange" value="{globalModel>name}" id="companyComboBox" placeholder="Select a company..."
                                items="{ path: '/Company',
                                         sorter: { path: 'name' } }">
                                    <items>
                                        <core:Item key="{ID}" text="{name}" />
                                    </items>
                                </ComboBox>  
                                <Button text="{i18n>cancel}" type="Default" class="sapUiSmallMarginBegin" 
                                        visible="{= !!${globalModel>name} }" press="onCompanyCancelPress" />
                            </HBox>              
                            <Label text="Name" />
                            <Text text="{globalModel>name}" />
                            <Label text="Description" />
                            <Text text="{globalModel>description}" />
                            <Label text="Capital" />
                            <Text id="countryText" text="{globalModel>capital} {globalModel>currency}" />
                        </f:content>
                    </f:SimpleForm>
                </VBox>
            </Panel>
            <content>
                <HBox width="auto">
                    <VBox class="sapUiResponsiveMargin" visible="{= !!${globalModel>/selectedCompany/ID} }">
                        <core:Fragment fragmentName="cap_try.view.fragments.ProductsTable" type="XML" />
                    </VBox>
                </HBox>
            </content>
            <footer>
                <Toolbar>
                    <Button visible="{= ${messageModel>/}.length !== 0}" press="toggleMessageView" icon="sap-icon://alert" text="{= ${messageModel>/}.length}" />
                    <ToolbarSpacer />
                    <Button press="openAddProductDialog" visible="{= !!${globalModel>/selectedCompany/ID} }" icon="sap-icon://add-product"/>
                </Toolbar>
            </footer>
    </Page>
</mvc:View>